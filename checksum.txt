#include <stdio.h>

int main() {
    int n, i, sum = 0, checksum, receivedSum = 0;

    printf("Enter number of 4-bit data segments: ");
    scanf("%d", &n);

    int data[50];

    printf("Enter the data segments (0 to 15):\n");
    for (i = 0; i < n; i++) {
        scanf("%d", &data[i]);
        sum += data[i];
        sum = (sum & 0xF) + (sum >> 4);  // Wrap-around for 4-bit sum
    }

    checksum = (~sum) & 0xF;  // 1’s complement (4-bit)
    printf("\nCalculated Checksum: %d\n", checksum);

    printf("\nEnter received data (including checksum):\n");
    for (i = 0; i < n + 1; i++) {
        int temp;
        scanf("%d", &temp);
        receivedSum += temp;
        receivedSum = (receivedSum & 0xF) + (receivedSum >> 4);
    }

    receivedSum = (~receivedSum) & 0xF;

    if (receivedSum == 0)
        printf("\n✅ No error detected in received data.\n");
    else
        printf("\n❌ Error detected in received data!\n");

    return 0;
}
